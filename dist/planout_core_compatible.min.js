!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.planout=t():e.planout=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=i(o),a=n(7),s=i(a),l=n(12),c=i(l),f=n(9),p=i(f),h=n(10),g=r(h),v=n(2),y=i(v),m=n(11),d=i(m);t["default"]={Namespace:g,Assignment:y["default"],Interpreter:s["default"],Experiment:u["default"],ExperimentSetup:d["default"],Ops:{Random:c["default"],Core:p["default"]}},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),a=r(u),s=n(5),l=function(){function e(t){i(this,e),this.inputs=t,this._exposureLogged=!1,this._salt=null,this._inExperiment=!0,this.name=this.getDefaultExperimentName(),this._autoExposureLog=!0,this.setup(),this._assignment=new a["default"](this.getSalt()),this._assigned=!1}return o(e,[{key:"getDefaultExperimentName",value:function(){if((0,s.isObject)(this)&&this.constructor&&this!==this.window){var e=this.constructor.toString().match(/function\s*(\w+)/);if(e&&2===e.length)return e[1]}return"GenericExperiment"}},{key:"getDefaultParamNames",value:function(){var e=this.assign.toString(),t=e.split(".set(");return t.splice(0,1),(0,s.map)(t,function(e){var t=(0,s.trimTrailingWhitespace)(e.split(",")[0]);return t.substr(1,t.length-2)})}},{key:"requireAssignment",value:function(){this._assigned||this._assign()}},{key:"requireExposureLogging",value:function(e){this.shouldLogExposure(e)&&this.logExposure()}},{key:"_assign",value:function(){this.configureLogger();var e=this.assign(this._assignment,this.inputs);e||void 0===e?this._inExperiment=!0:this._inExperiment=!1,this._assigned=!0}},{key:"setup",value:function(){}},{key:"inExperiment",value:function(){return this._inExperiment}},{key:"addOverride",value:function(e,t){this._assignment.addOverride(e,t)}},{key:"setOverrides",value:function(e){this._assignment.setOverrides(e);var t=this._assignment.getOverrides(),n=this;(0,s.forEach)(Object.keys(t),function(e){void 0!==n.inputs[e]&&(n.inputs[e]=t[e])})}},{key:"getSalt",value:function(){return this._salt?this._salt:this.name}},{key:"setSalt",value:function(e){this._salt=e,this._assignment&&(this._assignment.experimentSalt=e)}},{key:"getName",value:function(){return this.name}},{key:"assign",value:function(e,t){throw"IMPLEMENT assign"}},{key:"getParamNames",value:function(){throw"IMPLEMENT getParamNames"}},{key:"shouldFetchExperimentParameter",value:function(e){var t=this.getParamNames();return t.indexOf(e)>=0}},{key:"setName",value:function(e){var t=/\s+/g;this.name=e.replace(t,"-"),this._assignment&&(this._assignment.experimentSalt=this.getSalt())}},{key:"__asBlob",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={name:this.getName(),time:(new Date).getTime()/1e3,salt:this.getSalt(),inputs:this.inputs,params:this._assignment.getParams()};return(0,s.extend)(t,e),t}},{key:"setAutoExposureLogging",value:function(e){this._autoExposureLog=e}},{key:"getParams",value:function(){return this.requireAssignment(),this.requireExposureLogging(),this._assignment.getParams()}},{key:"get",value:function(e,t){return this.requireAssignment(),this.requireExposureLogging(e),this._assignment.get(e,t)}},{key:"toString",value:function(){return this.requireAssignment(),this.requireExposureLogging(),JSON.stringify(this.__asBlob())}},{key:"logExposure",value:function(e){this.inExperiment()&&(this._exposureLogged=!0,this.logEvent("exposure",e))}},{key:"shouldLogExposure",value:function(e){return!(void 0!==e&&!this.shouldFetchExperimentParameter(e))&&(this._autoExposureLog&&!this.previouslyLogged())}},{key:"logEvent",value:function(e,t){if(this.inExperiment()){var n;n=t?{event:e,extra_data:(0,s.shallowCopy)(t)}:{event:e},this.log(this.__asBlob(n))}}},{key:"configureLogger",value:function(){throw"IMPLEMENT configureLogger"}},{key:"log",value:function(e){throw"IMPLEMENT log"}},{key:"previouslyLogged",value:function(){throw"IMPLEMENT previouslyLogged"}}]),e}();t["default"]=l,e.exports=t["default"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),u=n(5),a=function(){function e(t,n){r(this,e),n||(n={}),this.experimentSalt=t,this._overrides=(0,u.shallowCopy)(n),this._data=(0,u.shallowCopy)(n),this.saltSeparator="."}return i(e,[{key:"evaluate",value:function(e){return e}},{key:"getOverrides",value:function(){return this._overrides}},{key:"addOverride",value:function(e,t){this._overrides[e]=t,this._data[e]=t}},{key:"setOverrides",value:function(e){this._overrides=(0,u.shallowCopy)(e);var t=this;(0,u.forEach)(Object.keys(this._overrides),function(e){t._data[e]=t._overrides[e]})}},{key:"set",value:function(e,t){return"_data"===e?void(this._data=t):"_overrides"===e?void(this._overrides=t):"experimentSalt"===e?void(this.experimentSalt=t):"saltSeparator"===e?void(this.saltSeparator=t):void((0,u.hasKey)(this._overrides,e)||(t instanceof o.PlanOutOpRandom?(t.args.salt||(t.args.salt=e),this._data[e]=t.execute(this)):this._data[e]=t))}},{key:"get",value:function(e){return"_data"===e?this._data:"_overrides"===e?this._overrides:"experimentSalt"===e?this.experimentSalt:"saltSeparator"===e?this.saltSeparator:this._data[e]}},{key:"getParams",value:function(){return this._data}},{key:"del",value:function(e){delete this._data[e]}},{key:"toString",value:function(){return String(this._data)}},{key:"length",value:function(){return Object.keys(this._data).length}}]),e}();t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),l=n(6),c=r(l),f=n(5),p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.LONG_SCALE=0xfffffffffffff,n}return u(t,e),a(t,[{key:"compatHashCalculation",value:function(e){return parseInt(e.substr(0,13),16)}},{key:"compatZeroToOneCalculation",value:function(e){return this.getHash(e)/this.LONG_SCALE}},{key:"getUnit",value:function(e){var t=this.getArgMixed("unit");return(0,f.isArray)(t)||(t=[t]),e&&t.push(e),t}},{key:"getUniform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2],r=this.compatZeroToOneCalculation(n);return r*(t-e)+e}},{key:"getHash",value:function(e){var t;if(this.args.full_salt)t=this.getArgString("full_salt")+".";else{var n=this.getArgString("salt");t=this.mapper.get("experimentSalt")+"."+n+this.mapper.get("saltSeparator")}var r=this.getUnit(e).map(function(e){return String(e)}).join("."),i=t+r,o=c["default"].hash(i);return this.compatHashCalculation(o)}}]),t}(s.PlanOutOpSimple),h=function(e){return function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"simpleExecute",value:function(){var e=this.getArgNumber("min"),t=this.getArgNumber("max");return this.getUniform(e,t)}}]),t}(e)},g=function(e){return function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"compatRandomIntegerCalculation",value:function(e,t){return(this.getHash()+e)%(t-e+1)}},{key:"simpleExecute",value:function(){var e=this.getArgNumber("min"),t=this.getArgNumber("max");return this.compatRandomIntegerCalculation(e,t)}}]),t}(e)},v=function(e){return function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"simpleExecute",value:function(){var e=this.getArgNumber("p");if(e<0||e>1)throw"Invalid probability";return this.getUniform(0,1)<=e?1:0}}]),t}(e)},y=function(e){return function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"simpleExecute",value:function(){var e=this.getArgNumber("p"),t=this.getArgList("choices");if(e<0||e>1)throw"Invalid probability";if(0==t.length)return[];for(var n=[],r=0;r<t.length;r++){var i=t[r];this.getUniform(0,1,i)<=e&&n.push(i)}return n}}]),t}(e)},m=function(e){return function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"compatRandomIndexCalculation",value:function(e){return this.getHash()%e.length}},{key:"simpleExecute",value:function(){var e=this.getArgList("choices");if(0===e.length)return[];var t=this.compatRandomIndexCalculation(e);return e[t]}}]),t}(e)},d=function(e){return function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"simpleExecute",value:function(){var e=this.getArgList("choices"),t=this.getArgList("weights");if(0===e.length)return[];var n=0,r=t.map(function(e){return n+=e}),i=this.getUniform(0,n);return(0,f.reduce)(r,function(t,n,r){return t?t:i<=n?e[r]:t},null)}}]),t}(e)},_=function(e){return function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"compatSampleIndexCalculation",value:function(e){return this.getHash(e)%(e+1)}},{key:"compatAllowSampleStoppingPoint",value:function(){return!0}},{key:"sample",value:function(e,t){for(var n=e.length,r=n-t,i=this.compatAllowSampleStoppingPoint(),o=n-1;o>0;o--){var u=this.compatSampleIndexCalculation(o),a=e[o];if(e[o]=e[u],e[u]=a,i&&r===o)return e.slice(o,n)}return e.slice(0,t)}},{key:"simpleExecute",value:function(){var e=(0,f.shallowCopy)(this.getArgList("choices")),t=0;return t=void 0!==this.args.draws?this.getArgNumber("draws"):e.length,this.sample(e,t)}}]),t}(e)};t["default"]={PlanOutOpRandom:p,SampleBuilder:_,Sample:_(p),WeightedChoiceBuilder:d,WeightedChoice:d(p),UniformChoiceBuilder:m,UniformChoice:m(p),BernoulliFilterBuilder:y,BernoulliFilter:y(p),BernoulliTrialBuilder:v,BernoulliTrial:v(p),RandomIntegerBuilder:g,RandomInteger:g(p),RandomFloatBuilder:h,RandomFloat:h(p)},e.exports=t["default"]},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PlanOutOpUnary=t.PlanOutOpBinary=t.PlanOutOpCommutative=t.PlanOutOpSimple=t.PlanOutOp=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=function(){function e(t){o(this,e),this.args=t}return u(e,[{key:"execute",value:function(e){throw"Implement the execute function"}},{key:"dumpArgs",value:function(){console.log(this.args)}},{key:"getArgMixed",value:function(e){if(void 0===this.args[e])throw"Missing argument "+e;return this.args[e]}},{key:"getArgNumber",value:function(e){var t=this.getArgMixed(e);if("number"!=typeof t)throw e+" is not a number.";return t}},{key:"getArgString",value:function(e){var t=this.getArgMixed(e);if("string"!=typeof t)throw e+" is not a string.";return t}},{key:"getArgList",value:function(e){var t=this.getArgMixed(e);if("[object Array]"!==Object.prototype.toString.call(t))throw e+" is not a list";return t}},{key:"getArgObject",value:function(e){var t=this.getArgMixed(e);if("[object Object]"!==Object.prototype.toString.call(t))throw e+" is not an object.";return t}},{key:"getArgIndexish",value:function(e){var t=this.getArgMixed(e),n=Object.prototype.toString.call(t);if("[object Object]"!==n&&"[object Array]"!==n)throw e+" is not an list or object.";return t}}]),e}(),l=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){this.mapper=e;var t=this;return(0,a.forEach)(Object.keys(this.args),function(n){t.args[n]=e.evaluate(t.args[n])}),this.simpleExecute()}}]),t}(s),c=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"simpleExecute",value:function(){return this.unaryExecute(this.getArgMixed("value"))}},{key:"getUnaryString",value:function(){return this.args.op}},{key:"unaryExecute",value:function(e){throw"implement unaryExecute"}}]),t}(l),f=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"simpleExecute",value:function(){var e=this.getArgMixed("left"),t=this.getArgMixed("right");return this.binaryExecute(e,t)}},{key:"getInfixString",value:function(){return this.args.op}},{key:"binaryExecute",value:function(e,t){throw"implement binaryExecute"}}]),t}(l),p=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"simpleExecute",value:function(){return this.commutativeExecute(this.getArgList("values"))}},{key:"getCommutativeString",value:function(){return this.args.op}},{key:"commutativeExecute",value:function(e){throw"implement commutativeExecute"}}]),t}(l);t.PlanOutOp=s,t.PlanOutOpSimple=l,t.PlanOutOpCommutative=p,t.PlanOutOpBinary=f,t.PlanOutOpUnary=c},function(e,t){"use strict";function n(e,t){var n=A.length,r=e.constructor,i=l(r)&&r.prototype||Object.Prototype,o="constructor";for(j(e,o)&&!L(t,o)&&t.push(o);n--;)o=A[n],o in e&&e[o]!==i[o]&&!L(t,o)&&t.push(o)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){return e.replace(/^\s+|\s+$/g,"")},o=function(e){var t,n="undefined"!=typeof location,r="undefined"!=typeof window;if(n){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)"),o=i.exec(location.search);t=null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}else t="";return null!==t&&void 0!==t&&0!==t.length||!r||void 0===window.localStorage||null===window.localStorage?t:window.localStorage.getItem(e)},u=function I(e){var t=e;if(e&&"object"===("undefined"==typeof e?"undefined":r(e))){t="[object Array]"===Object.prototype.toString.call(e)?[]:{};for(var n in e)t[n]=I(e[n])}return t},a=function(e){var t="undefined"==typeof e?"undefined":r(e);return"function"===t||"object"===t&&!!e},s=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},l=function(e){return"function"==typeof e||!1},c=function R(e){if(!a(e))return[];if(Object.keys)return Object.keys(e);var R=[];for(var t in e)j(e,t)&&R.push(t);return N&&n(e,R),R},f=function(e){if(!a(e))return[];var t=[];for(var r in e)t.push(r);return N&&n(e,t),t},p=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],u=e(o),a=u.length,s=0;s<a;s++){var l=u[s];t&&void 0!==n[l]||(n[l]=o[l])}return n}},h=p(f),g=p(c),v=function(e){return e},y=function(e,t){var n=n(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var u=n[o];if(t[u]!==i[u]||!(u in i))return!1}return!0},m=function(e){return e=g({},e),function(t){return y(t,e)}},d=function(e,t,n){return null==e?v:l(e)?_(e,t,n):a(e)?m(e):w(e)},_=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},O=function(e,t,n){t=_(t,n);var r,i;if(S(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=c(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},b=function(e,t,n){t=d(t,n);for(var r=!S(e)&&c(e),i=(r||e).length,o=Array(i),u=0;u<i;u++){var a=r?r[u]:u;o[u]=t(e[a],a,e)}return o},x=function(e,t,n,r){t=_(t,r,4);var i=!S(e)&&c(e),o=(i||e).length,u=0;for(arguments.length<3&&(n=e[i?i[u]:u],u+=1);u>=0&&u<o;u++){var a=i?i[u]:u;n=t(n,e[a],a,e)}return n},E=function(e){return a(e)?s(e)?e.slice():h({},e):e},w=function(e){return function(t){return null==t?void 0:t[e]}},P=Math.pow(2,53)-1,k=w("length"),S=function(e){var t=k(e);return"number"==typeof t&&t>=0&&t<=P},j=function(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)},N=!{toString:null}.propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],L=function(e,t,n,r){return S(e)||(e=M(e)),("number"!=typeof n||r)&&(n=0),e.indexOf(t)>=0},M=function(e){for(var t=c(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},C=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t},T=function(e,t){return"undefined"!=typeof e[t]};t["default"]={deepCopy:u,map:b,reduce:x,getParameterByName:o,forEach:O,isFunction:l,trimTrailingWhitespace:i,hasKey:T,shallowCopy:E,extend:h,isObject:a,isArray:s,range:C},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.hash=function(e){e=unescape(encodeURIComponent(e));var t=[1518500249,1859775393,2400959708,3395469782];e+=String.fromCharCode(128);for(var r=e.length/4+2,i=Math.ceil(r/16),o=new Array(i),u=0;u<i;u++){o[u]=new Array(16);for(var a=0;a<16;a++)o[u][a]=e.charCodeAt(64*u+4*a)<<24|e.charCodeAt(64*u+4*a+1)<<16|e.charCodeAt(64*u+4*a+2)<<8|e.charCodeAt(64*u+4*a+3)}o[i-1][14]=8*(e.length-1)/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=8*(e.length-1)&4294967295;for(var s,l,c,f,p,h=1732584193,g=4023233417,v=2562383102,y=271733878,m=3285377520,d=new Array(80),u=0;u<i;u++){for(var _=0;_<16;_++)d[_]=o[u][_];for(var _=16;_<80;_++)d[_]=n.ROTL(d[_-3]^d[_-8]^d[_-14]^d[_-16],1);s=h,l=g,c=v,f=y,p=m;for(var _=0;_<80;_++){var O=Math.floor(_/20),b=n.ROTL(s,5)+n.f(O,l,c,f)+p+t[O]+d[_]&4294967295;p=f,f=c,c=n.ROTL(l,30),l=s,s=b}h=h+s&4294967295,g=g+l&4294967295,v=v+c&4294967295,y=y+f&4294967295,m=m+p&4294967295}return n.toHexStr(h)+n.toHexStr(g)+n.toHexStr(v)+n.toHexStr(y)+n.toHexStr(m)},n.f=function(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}},n.ROTL=function(e,t){return e<<t|e>>>32-t},n.toHexStr=function(e){for(var t,n="",r=7;r>=0;r--)t=e>>>4*r&15,n+=t.toString(16);return n},t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),a=r(u),s=n(8),l=n(5),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global_salt",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3];i(this,e),this._serialization=t,o?this._env=o:this._env=new a["default"](n),this.experimentSalt=this._experimentSalt=n,this._evaluated=!1,this._inExperiment=!1,this._inputs=(0,l.shallowCopy)(r)}return o(e,[{key:"inExperiment",value:function(){return this._inExperiment}},{key:"setEnv",value:function(e){return this._env=(0,l.deepCopy)(e),this}},{key:"has",value:function(e){return this._env[e]}},{key:"get",value:function(e,t){var n=this._inputs[e];null!==n&&void 0!==n||(n=t);var r=this._env.get(e);return void 0!==r&&null!==r?r:n}},{key:"getParams",value:function(){if(!this._evaluated){try{this.evaluate(this._serialization)}catch(e){e instanceof s.StopPlanOutException&&(this._inExperiment=e.inExperiment)}this._evaluated=!0}return this._env.getParams()}},{key:"set",value:function(e,t){return this._env.set(e,t),this}},{key:"getSaltSeparator",value:function(){return this._env.saltSeparator}},{key:"setOverrides",value:function(e){return this._env.setOverrides(e),this}},{key:"getOverrides",value:function(){return this._env.getOverrides()}},{key:"hasOverride",value:function(e){var t=this.getOverrides();return t&&void 0!==t[e]}},{key:"registerCustomOperators",value:function(e){(0,s.registerOperators)(e)}},{key:"evaluate",value:function(e){if((0,l.isObject)(e)&&e.op)return(0,s.operatorInstance)(e).execute(this);if((0,l.isArray)(e)){var t=this;return(0,l.map)(e,function(e){return t.evaluate(e)})}return e}}]),e}();t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.registerOperators=t.StopPlanOutException=t.operatorInstance=t.isOperator=t.initFactory=t.operators=void 0;var o=n(9),u=r(o),a=n(3),s=r(a),l=n(5),c=function(){return{literal:u.Literal,get:u.Get,set:u.Set,seq:u.Seq,"return":u.Return,index:u.Index,array:u.Arr,equals:u.Equals,and:u.And,or:u.Or,">":u.GreaterThan,"<":u.LessThan,">=":u.GreaterThanOrEqualTo,"<=":u.LessThanOrEqualTo,"%":u.Mod,"/":u.Divide,not:u.Not,round:u.Round,negative:u.Negative,min:u.Min,max:u.Max,length:u.Length,coalesce:u.Coalesce,map:u.Map,cond:u.Cond,product:u.Product,sum:u.Sum,randomFloat:s.RandomFloat,randomInteger:s.RandomInteger,bernoulliTrial:s.BernoulliTrial,bernoulliFilter:s.BernoulliFilter,uniformChoice:s.UniformChoice,weightedChoice:s.WeightedChoice,sample:s.Sample}},f=c(),p=function(e){return(0,l.isObject)(e)&&e.op},h=function(e){var t=e.op;if(!f[t])throw"Unknown Operator "+t;return new f[t](e)},g=function(e){(0,l.forEach)(e,function(e,t){if(f[t])throw t+" already is defined";f[t]=e})},v=function y(e){i(this,y),this.inExperiment=e};t.operators=f,t.initFactory=c,t.isOperator=p,t.operatorInstance=h,t.StopPlanOutException=v,t.registerOperators=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Return=t.Length=t.Max=t.Min=t.Negative=t.Not=t.Round=t.Divide=t.Mod=t.GreaterThanOrEqualTo=t.LessThanOrEqualTo=t.LessThan=t.GreaterThan=t.Equals=t.Sum=t.Product=t.Or=t.And=t.Cond=t.Index=t.Coalesce=t.Map=t.Arr=t.Set=t.Seq=t.Get=t.Literal=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=n(8),l=n(5),c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"execute",value:function(e){return this.getArgMixed("value")}}]),t}(a.PlanOutOp),f=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"execute",value:function(e){return e.get(this.getArgString("var"))}}]),t}(a.PlanOutOp),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"execute",value:function(e){(0,l.forEach)(this.getArgList("seq"),function(t){e.evaluate(t)})}}]),t}(a.PlanOutOp),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"execute",value:function(e){var t=e.evaluate(this.getArgMixed("value")),n=!1;throw t&&(n=!0),new s.StopPlanOutException(n)}}]),t}(a.PlanOutOp),g=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"execute",value:function(e){var t=this.getArgString("var"),n=this.getArgMixed("value");e.hasOverride(t)||(n&&(0,s.isOperator)(n)&&!n.salt&&(n.salt=t),"experimentSalt"==t&&(e.experimentSalt=n),e.set(t,e.evaluate(n)))}}]),t}(a.PlanOutOp),v=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"execute",value:function(e){return(0,l.map)(this.getArgList("values"),function(t){return e.evaluate(t)})}}]),t}(a.PlanOutOp),y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"execute",value:function(e){for(var t=this.getArgList("values"),n=0;n<t.length;n++){var r=t[n],i=e.evaluate(r);if(null!==i&&void 0!==i)return i}return null}}]),t}(a.PlanOutOp),m=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"simpleExecute",value:function(){var e=this.getArgIndexish("base"),t=this.getArgMixed("index");return"number"==typeof t?t>=0&&t<e.length?e[t]:void 0:e[t]}}]),t}(a.PlanOutOpSimple),d=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"execute",value:function(e){var t=this.getArgList("cond");for(var n in t){var r=t[n]["if"],i=t[n].then;if(e.evaluate(r))return e.evaluate(i)}return null}}]),t}(a.PlanOutOp),_=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"execute",value:function(e){return(0,l.reduce)(this.getArgList("values"),function(t,n){return t?Boolean(e.evaluate(n)):t},!0)}}]),t}(a.PlanOutOp),O=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"execute",value:function(e){return(0,l.reduce)(this.getArgList("values"),function(t,n){return t?t:Boolean(e.evaluate(n))},!1)}}]),t}(a.PlanOutOp),b=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"commutativeExecute",value:function(e){return(0,l.reduce)(e,function(e,t){return e*t},1)}}]),t}(a.PlanOutOpCommutative),x=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"commutativeExecute",value:function(e){return(0,l.reduce)(e,function(e,t){return e+t},0)}}]),t}(a.PlanOutOpCommutative),E=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"getInfixString",value:function(){return"=="}},{key:"binaryExecute",value:function(e,t){return e===t}}]),t}(a.PlanOutOpBinary),w=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"binaryExecute",value:function(e,t){return e>t}}]),t}(a.PlanOutOpBinary),P=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"binaryExecute",value:function(e,t){return e<t}}]),t}(a.PlanOutOpBinary),k=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"binaryExecute",value:function(e,t){return e<=t}}]),t}(a.PlanOutOpBinary),S=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"binaryExecute",value:function(e,t){return e>=t}}]),t}(a.PlanOutOpBinary),j=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"binaryExecute",value:function(e,t){return e%t}}]),t}(a.PlanOutOpBinary),N=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"binaryExecute",value:function(e,t){return parseFloat(e)/parseFloat(t)}}]),t}(a.PlanOutOpBinary),A=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"unaryExecute",value:function(e){return Math.round(e)}}]),t}(a.PlanOutOpUnary),L=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"getUnaryString",value:function(){return"!"}},{key:"unaryExecute",value:function(e){return!e}}]),t}(a.PlanOutOpUnary),M=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"getUnaryString",value:function(){return"-"}},{key:"unaryExecute",value:function(e){return 0-e}}]),t}(a.PlanOutOpUnary),C=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"commutativeExecute",value:function(e){return Math.min.apply(null,e)}}]),t}(a.PlanOutOpCommutative),T=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"commutativeExecute",value:function(e){return Math.max.apply(null,e);
}}]),t}(a.PlanOutOpCommutative),I=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"unaryExecute",value:function(e){return e.length}}]),t}(a.PlanOutOpUnary),R=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"simpleExecute",value:function(){var e=(0,l.deepCopy)(this.args);return delete e.op,delete e.salt,e}}]),t}(a.PlanOutOpSimple);t.Literal=c,t.Get=f,t.Seq=p,t.Set=g,t.Arr=v,t.Map=R,t.Coalesce=y,t.Index=m,t.Cond=d,t.And=_,t.Or=O,t.Product=b,t.Sum=x,t.Equals=E,t.GreaterThan=w,t.LessThan=P,t.LessThanOrEqualTo=k,t.GreaterThanOrEqualTo=S,t.Mod=j,t.Divide=N,t.Round=A,t.Not=L,t.Negative=M,t.Min=C,t.Max=T,t.Length=I,t.Return=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleNamespace=t.Namespace=void 0;var a=function _(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:_(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),f=n(2),p=r(f),h=n(3),g=n(5),v=n(11),y=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),s(t,[{key:"configureLogger",value:function(){}},{key:"setup",value:function(){this.name="test_name"}},{key:"log",value:function(e){}},{key:"getParamNames",value:function(){return this.getDefaultParamNames()}},{key:"previouslyLogged",value:function(){return!0}},{key:"assign",value:function(e,t){}}]),t}(c["default"]),m=function(){function e(){i(this,e)}return s(e,[{key:"addExperiment",value:function(e,t,n){throw"IMPLEMENT addExperiment"}},{key:"removeExperiment",value:function(e){throw"IMPLEMENT removeExperiment"}},{key:"setAutoExposureLogging",value:function(e){throw"IMPLEMENT setAutoExposureLogging"}},{key:"inExperiment",value:function(){throw"IMPLEMENT inExperiment"}},{key:"get",value:function(e,t){throw"IMPLEMENT get"}},{key:"logExposure",value:function(e){throw"IMPLEMENT logExposure"}},{key:"logEvent",value:function(e,t){throw"IMPLEMENT logEvent"}},{key:"requireExperiment",value:function(){this._experiment||this._assignExperiment()}},{key:"requireDefaultExperiment",value:function(){this._defaultExperiment||this._assignDefaultExperiment()}}]),e}(),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name=n.getDefaultNamespaceName(),n.inputs=e||{},n.numSegments=1,n.segmentAllocations={},n.currentExperiments={},n._experiment=null,n._defaultExperiment=null,n.defaultExperimentClass=y,n._inExperiment=!1,n.setupDefaults(),n.setup(),n.availableSegments=(0,g.range)(n.numSegments),n.setupExperiments(),n}return u(t,e),s(t,[{key:"setupDefaults",value:function(){}},{key:"setup",value:function(){throw"IMPLEMENT setup"}},{key:"setupExperiments",value:function(){throw"IMPLEMENT setupExperiments"}},{key:"getPrimaryUnit",value:function(){return this._primaryUnit}},{key:"allowedOverride",value:function(){return!1}},{key:"getOverrides",value:function(){return{}}},{key:"setPrimaryUnit",value:function(e){this._primaryUnit=e}},{key:"addExperiment",value:function(e,t,n){var r=this.availableSegments.length;if(r<n)return!1;if(void 0!==this.currentExperiments[e])return!1;var i=new p["default"](this.name);i.set("sampled_segments",new h.Sample({choices:this.availableSegments,draws:n,unit:e}));for(var o=i.get("sampled_segments"),u=0;u<o.length;u++){this.segmentAllocations[o[u]]=e;var a=this.availableSegments.indexOf(o[u]);this.availableSegments[a]=this.availableSegments[r-1],this.availableSegments.splice(r-1,1),r-=1}this.currentExperiments[e]=t}},{key:"removeExperiment",value:function(e){var t=this;return void 0!==this.currentExperiments[e]&&((0,g.forEach)(Object.keys(this.segmentAllocations),function(n){t.segmentAllocations[n]===e&&(delete t.segmentAllocations[n],t.availableSegments.push(n))}),delete this.currentExperiments[e],!0)}},{key:"getSegment",value:function(){var e=new p["default"](this.name),t=new h.RandomInteger({min:0,max:this.numSegments-1,unit:this.inputs[this.getPrimaryUnit()]});return e.set("segment",t),e.get("segment")}},{key:"_assignExperiment",value:function(){this.inputs=(0,g.extend)(this.inputs,(0,v.getExperimentInputs)(this.getName()));var e=this.getSegment();if(void 0!==this.segmentAllocations[e]){var t=this.segmentAllocations[e];this._assignExperimentObject(t)}}},{key:"_assignExperimentObject",value:function(e){var t=new this.currentExperiments[e](this.inputs);t.setName(this.getName()+"-"+e),t.setSalt(this.getName()+"-"+e),this._experiment=t,this._inExperiment=t.inExperiment(),this._inExperiment||this._assignDefaultExperiment()}},{key:"_assignDefaultExperiment",value:function(){this._defaultExperiment=new this.defaultExperimentClass(this.inputs)}},{key:"defaultGet",value:function(e,n){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"requireDefaultExperiment",this).call(this),this._defaultExperiment.get(e,n)}},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){this.name=e}},{key:"previouslyLogged",value:function(){return this._experiment?this._experiment.previouslyLogged():null}},{key:"inExperiment",value:function(){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"requireExperiment",this).call(this),this._inExperiment}},{key:"setAutoExposureLogging",value:function(e){this._autoExposureLoggingSet=e,this._defaultExperiment&&this._defaultExperiment.setAutoExposureLogging(e),this._experiment&&this._experiment.setAutoExposureLogging(e)}},{key:"setGlobalOverride",value:function(e){var t=this.getOverrides();if(t&&(0,g.hasKey)(t,e)){var n=t[e];n&&(0,g.hasKey)(this.currentExperiments,n.experimentName)&&(this._assignExperimentObject(n.experimentName),this._experiment.addOverride(e,n.value))}}},{key:"setLocalOverride",value:function(e){var t=(0,g.getParameterByName)("experimentOverride");t&&(0,g.hasKey)(this.currentExperiments,t)&&(this._assignExperimentObject(t),(0,g.getParameterByName)(e)&&this._experiment.addOverride(e,(0,g.getParameterByName)(e)))}},{key:"getParams",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"requireExperiment",this).call(this),this._experiment&&this.getOriginalExperimentName()===e?this._experiment.getParams():null}},{key:"getOriginalExperimentName",value:function(){return this._experiment?this._experiment.getName().split("-")[1]:null}},{key:"get",value:function(e,n){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"requireExperiment",this).call(this),this.allowedOverride()&&this.setGlobalOverride(e),this.setLocalOverride(e),this._experiment?(void 0!==this._autoExposureLoggingSet&&this._experiment.setAutoExposureLogging(this._autoExposureLoggingSet),this._experiment.get(e,this.defaultGet(e,n))):this.defaultGet(e,n)}},{key:"logExposure",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"requireExperiment",this).call(this),this._experiment&&this._experiment.logExposure(e)}},{key:"logEvent",value:function(e,n){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"requireExperiment",this).call(this),this._experiment&&this._experiment.logEvent(e,n)}},{key:"getDefaultNamespaceName",value:function(){if((0,g.isObject)(this)&&this.constructor&&this!==this.window){var e=this.constructor.toString().match(/function\s*(\w+)/);if(e&&2===e.length)return e[1]}return"GenericNamespace"}}]),t}(m);t.Namespace=m,t.SimpleNamespace=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i={},o={},u=function(e){return e?a((0,r.shallowCopy)(e)):{}},a=function(e){return(0,r.forEach)(Object.keys(e),function(t){(0,r.isFunction)(e[t])&&(e[t]=e[t]())}),e},s=function(e,t,n){n?(o[n]||(o[n]={}),o[n][e]=t):i[e]=t},l=function(e){var t=u(i);return e&&o[e]?(0,r.extend)(t,u(o[e])):t};t["default"]={registerExperimentInput:s,getExperimentInputs:l},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),l=n(13),c=r(l),f=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.LONG_SCALE=new c["default"]("FFFFFFFFFFFFFFF",16),n}return u(t,e),a(t,[{key:"compatHashCalculation",value:function(e){return new c["default"](e.substr(0,15),16)}},{key:"compatZeroToOneCalculation",value:function(e){return this.getHash(e).dividedBy(this.LONG_SCALE).toNumber()}}]),t}(s.PlanOutOpRandom),p=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"compatRandomIntegerCalculation",value:function(e,t){return this.getHash().plus(e).modulo(t-e+1).toNumber()}}]),t}((0,s.RandomIntegerBuilder)(f)),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"compatRandomIndexCalculation",value:function(e){return this.getHash().modulo(e.length).toNumber()}}]),t}((0,s.UniformChoiceBuilder)(f)),g=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"compatSampleIndexCalculation",value:function(e){return this.getHash(e).modulo(e+1).toNumber()}},{key:"compatAllowSampleStoppingPoint",value:function(){return!1}}]),t}((0,s.SampleBuilder)(f));t["default"]={PlanOutOpRandom:f,Sample:g,WeightedChoice:(0,s.WeightedChoiceBuilder)(f),UniformChoice:h,BernoulliFilter:(0,s.BernoulliFilterBuilder)(f),BernoulliTrial:(0,s.BernoulliTrialBuilder)(f),RandomInteger:p,RandomFloat:(0,s.RandomFloatBuilder)(f)},e.exports=t["default"]},function(e,t,n){var r;!function(i){"use strict";function o(e){function t(e,r){var i,o,u,a,s,l,c=this;if(!(c instanceof t))return $&&M(26,"constructor call without new",e),new t(e,r);if(null!=r&&W(r,2,64,I,"base")){if(r=0|r,l=e+"",10==r)return c=new t(e instanceof t?e:l),C(c,B+c.e+1,U);if((a="number"==typeof e)&&0*e!=0||!new RegExp("^-?"+(i="["+w.slice(0,r)+"]+")+"(?:\\."+i+")?$",r<37?"i":"").test(l))return m(c,l,a,r);a?(c.s=1/e<0?(l=l.slice(1),-1):1,$&&l.replace(/^0\.0*|\./,"").length>15&&M(I,E,e),a=!1):c.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1,l=n(l,10,r,c.s)}else{if(e instanceof t)return c.s=e.s,c.e=e.e,c.c=(e=e.c)?e.slice():e,void(I=0);if((a="number"==typeof e)&&0*e==0){if(c.s=1/e<0?(e=-e,-1):1,e===~~e){for(o=0,u=e;u>=10;u/=10,o++);return c.e=o,c.c=[e],void(I=0)}l=e+""}else{if(!d.test(l=e+""))return m(c,l,a);c.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1}}for((o=l.indexOf("."))>-1&&(l=l.replace(".","")),(u=l.search(/e/i))>0?(o<0&&(o=u),o+=+l.slice(u+1),l=l.substring(0,u)):o<0&&(o=l.length),u=0;48===l.charCodeAt(u);u++);for(s=l.length;48===l.charCodeAt(--s););if(l=l.slice(u,s+1))if(s=l.length,a&&$&&s>15&&M(I,E,c.s*e),o=o-u-1,o>H)c.c=c.e=null;else if(o<G)c.c=[c.e=0];else{if(c.e=o,c.c=[],u=(o+1)%k,o<0&&(u+=k),u<s){for(u&&c.c.push(+l.slice(0,u)),s-=k;u<s;)c.c.push(+l.slice(u,u+=k));l=l.slice(u),u=k-l.length}else u-=s;for(;u--;l+="0");c.c.push(+l)}else c.c=[c.e=0];I=0}function n(e,n,r,i){var o,u,s,l,c,p,g,v=e.indexOf("."),y=B,m=U;for(r<37&&(e=e.toLowerCase()),v>=0&&(s=V,V=0,e=e.replace(".",""),g=new t(r),c=g.pow(e.length-v),V=s,g.c=f(h(a(c.c),c.e),10,n),g.e=g.c.length),p=f(e,r,n),u=s=p.length;0==p[--s];p.pop());if(!p[0])return"0";if(v<0?--u:(c.c=p,c.e=u,c.s=i,c=T(c,g,y,m,n),p=c.c,l=c.r,u=c.e),o=u+y+1,v=p[o],s=n/2,l=l||o<0||null!=p[o+1],l=m<4?(null!=v||l)&&(0==m||m==(c.s<0?3:2)):v>s||v==s&&(4==m||l||6==m&&1&p[o-1]||m==(c.s<0?8:7)),o<1||!p[0])e=l?h("1",-y):"0";else{if(p.length=o,l)for(--n;++p[--o]>n;)p[o]=0,o||(++u,p.unshift(1));for(s=p.length;!p[--s];);for(v=0,e="";v<=s;e+=w.charAt(p[v++]));e=h(e,u)}return e}function r(e,n,r,i){var o,u,s,l,c;if(r=null!=r&&W(r,0,8,i,x)?0|r:U,!e.c)return e.toString();if(o=e.c[0],s=e.e,null==n)c=a(e.c),c=19==i||24==i&&s<=q?p(c,s):h(c,s);else if(e=C(new t(e),n,r),u=e.e,c=a(e.c),l=c.length,19==i||24==i&&(n<=u||u<=q)){for(;l<n;c+="0",l++);c=p(c,u)}else if(n-=s,c=h(c,u),u+1>l){if(--n>0)for(c+=".";n--;c+="0");}else if(n+=u-l,n>0)for(u+1==l&&(c+=".");n--;c+="0");return e.s<0&&o?"-"+c:c}function i(e,n){var r,i,o=0;for(c(e[0])&&(e=e[0]),r=new t(e[0]);++o<e.length;){if(i=new t(e[o]),!i.s){r=i;break}n.call(r,i)&&(r=i)}return r}function v(e,t,n,r,i){return(e<t||e>n||e!=g(e))&&M(r,(i||"decimal places")+(e<t||e>n?" out of range":" not an integer"),e),!0}function L(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+n*k-1)>H?e.c=e.e=null:n<G?e.c=[e.e=0]:(e.e=n,e.c=t),e}function M(e,t,n){var r=new Error(["new BigNumber","cmp","config","div","divToInt","eq","gt","gte","lt","lte","minus","mod","plus","precision","random","round","shift","times","toDigits","toExponential","toFixed","toFormat","toFraction","pow","toPrecision","toString","BigNumber"][e]+"() "+t+": "+n);throw r.name="BigNumber Error",I=0,r}function C(e,t,n,r){var i,o,u,a,s,l,c,f=e.c,p=j;if(f){e:{for(i=1,a=f[0];a>=10;a/=10,i++);if(o=t-i,o<0)o+=k,u=t,s=f[l=0],c=s/p[i-u-1]%10|0;else if(l=_((o+1)/k),l>=f.length){if(!r)break e;for(;f.length<=l;f.push(0));s=c=0,i=1,o%=k,u=o-k+1}else{for(s=a=f[l],i=1;a>=10;a/=10,i++);o%=k,u=o-k+i,c=u<0?0:s/p[i-u-1]%10|0}if(r=r||t<0||null!=f[l+1]||(u<0?s:s%p[i-u-1]),r=n<4?(c||r)&&(0==n||n==(e.s<0?3:2)):c>5||5==c&&(4==n||r||6==n&&(o>0?u>0?s/p[i-u]:0:f[l-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,r?(t-=e.e+1,f[0]=p[t%k],e.e=-t||0):f[0]=e.e=0,e;if(0==o?(f.length=l,a=1,l--):(f.length=l+1,a=p[k-o],f[l]=u>0?O(s/p[i-u]%p[u])*a:0),r)for(;;){if(0==l){for(o=1,u=f[0];u>=10;u/=10,o++);for(u=f[0]+=a,a=1;u>=10;u/=10,a++);o!=a&&(e.e++,f[0]==P&&(f[0]=1));break}if(f[l]+=a,f[l]!=P)break;f[l--]=0,a=1}for(o=f.length;0===f[--o];f.pop());}e.e>H?e.c=e.e=null:e.e<G&&(e.c=[e.e=0])}return e}var T,I=0,R=t.prototype,F=new t(1),B=20,U=4,q=-7,D=21,G=-1e7,H=1e7,$=!0,W=v,z=!1,K=1,V=100,Z={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0};return t.another=o,t.ROUND_UP=0,t.ROUND_DOWN=1,t.ROUND_CEIL=2,t.ROUND_FLOOR=3,t.ROUND_HALF_UP=4,t.ROUND_HALF_DOWN=5,t.ROUND_HALF_EVEN=6,t.ROUND_HALF_CEIL=7,t.ROUND_HALF_FLOOR=8,t.EUCLID=9,t.config=function(){var e,t,n=0,r={},i=arguments,o=i[0],u=o&&"object"==typeof o?function(){if(o.hasOwnProperty(t))return null!=(e=o[t])}:function(){if(i.length>n)return null!=(e=i[n++])};return u(t="DECIMAL_PLACES")&&W(e,0,A,2,t)&&(B=0|e),r[t]=B,u(t="ROUNDING_MODE")&&W(e,0,8,2,t)&&(U=0|e),r[t]=U,u(t="EXPONENTIAL_AT")&&(c(e)?W(e[0],-A,0,2,t)&&W(e[1],0,A,2,t)&&(q=0|e[0],D=0|e[1]):W(e,-A,A,2,t)&&(q=-(D=0|(e<0?-e:e)))),r[t]=[q,D],u(t="RANGE")&&(c(e)?W(e[0],-A,-1,2,t)&&W(e[1],1,A,2,t)&&(G=0|e[0],H=0|e[1]):W(e,-A,A,2,t)&&(0|e?G=-(H=0|(e<0?-e:e)):$&&M(2,t+" cannot be zero",e))),r[t]=[G,H],u(t="ERRORS")&&(e===!!e||1===e||0===e?(I=0,W=($=!!e)?v:l):$&&M(2,t+b,e)),r[t]=$,u(t="CRYPTO")&&(e===!!e||1===e||0===e?(z=!(!e||!y||"object"!=typeof y),e&&!z&&$&&M(2,"crypto unavailable",y)):$&&M(2,t+b,e)),r[t]=z,u(t="MODULO_MODE")&&W(e,0,9,2,t)&&(K=0|e),r[t]=K,u(t="POW_PRECISION")&&W(e,0,A,2,t)&&(V=0|e),r[t]=V,u(t="FORMAT")&&("object"==typeof e?Z=e:$&&M(2,t+" not an object",e)),r[t]=Z,r},t.max=function(){return i(arguments,R.lt)},t.min=function(){return i(arguments,R.gt)},t.random=function(){var e=9007199254740992,n=Math.random()*e&2097151?function(){return O(Math.random()*e)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var r,i,o,u,a,s=0,l=[],c=new t(F);if(e=null!=e&&W(e,0,A,14)?0|e:B,u=_(e/k),z)if(y&&y.getRandomValues){for(r=y.getRandomValues(new Uint32Array(u*=2));s<u;)a=131072*r[s]+(r[s+1]>>>11),a>=9e15?(i=y.getRandomValues(new Uint32Array(2)),r[s]=i[0],r[s+1]=i[1]):(l.push(a%1e14),s+=2);s=u/2}else if(y&&y.randomBytes){for(r=y.randomBytes(u*=7);s<u;)a=281474976710656*(31&r[s])+1099511627776*r[s+1]+4294967296*r[s+2]+16777216*r[s+3]+(r[s+4]<<16)+(r[s+5]<<8)+r[s+6],a>=9e15?y.randomBytes(7).copy(r,s):(l.push(a%1e14),s+=7);s=u/7}else $&&M(14,"crypto unavailable",y);if(!s)for(;s<u;)a=n(),a<9e15&&(l[s++]=a%1e14);for(u=l[--s],e%=k,u&&e&&(a=j[k-e],l[s]=O(u/a)*a);0===l[s];l.pop(),s--);if(s<0)l=[o=0];else{for(o=-1;0===l[0];l.shift(),o-=k);for(s=1,a=l[0];a>=10;a/=10,s++);s<k&&(o-=k-s)}return c.e=o,c.c=l,c}}(),T=function(){function e(e,t,n){var r,i,o,u,a=0,s=e.length,l=t%N,c=t/N|0;for(e=e.slice();s--;)o=e[s]%N,u=e[s]/N|0,r=c*o+u*l,i=l*o+r%N*N+a,a=(i/n|0)+(r/N|0)+c*u,e[s]=i%n;return a&&e.unshift(a),e}function n(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.shift());}return function(i,o,a,s,l){var c,f,p,h,g,v,y,m,d,_,b,x,E,w,S,j,N,A=i.s==o.s?1:-1,L=i.c,M=o.c;if(!(L&&L[0]&&M&&M[0]))return new t(i.s&&o.s&&(L?!M||L[0]!=M[0]:M)?L&&0==L[0]||!M?0*A:A/0:NaN);for(m=new t(A),d=m.c=[],f=i.e-o.e,A=a+f+1,l||(l=P,f=u(i.e/k)-u(o.e/k),A=A/k|0),p=0;M[p]==(L[p]||0);p++);if(M[p]>(L[p]||0)&&f--,A<0)d.push(1),h=!0;else{for(w=L.length,j=M.length,p=0,A+=2,g=O(l/(M[0]+1)),g>1&&(M=e(M,g,l),L=e(L,g,l),j=M.length,w=L.length),E=j,_=L.slice(0,j),b=_.length;b<j;_[b++]=0);N=M.slice(),N.unshift(0),S=M[0],M[1]>=l/2&&S++;do{if(g=0,c=n(M,_,j,b),c<0){if(x=_[0],j!=b&&(x=x*l+(_[1]||0)),g=O(x/S),g>1)for(g>=l&&(g=l-1),v=e(M,g,l),y=v.length,b=_.length;1==n(v,_,y,b);)g--,r(v,j<y?N:M,y,l),y=v.length,c=1;else 0==g&&(c=g=1),v=M.slice(),y=v.length;if(y<b&&v.unshift(0),r(_,v,b,l),b=_.length,c==-1)for(;n(M,_,j,b)<1;)g++,r(_,j<b?N:M,b,l),b=_.length}else 0===c&&(g++,_=[0]);d[p++]=g,_[0]?_[b++]=L[E]||0:(_=[L[E]],b=1)}while((E++<w||null!=_[0])&&A--);h=null!=_[0],d[0]||d.shift()}if(l==P){for(p=1,A=d[0];A>=10;A/=10,p++);C(m,a+(m.e=p+f*k-1)+1,s,h)}else m.e=f,m.r=+h;return m}}(),m=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,n=/^([^.]+)\.$/,r=/^\.([^.]+)$/,i=/^-?(Infinity|NaN)$/,o=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(u,a,s,l){var c,f=s?a:a.replace(o,"");if(i.test(f))u.s=isNaN(f)?null:f<0?-1:1;else{if(!s&&(f=f.replace(e,function(e,t,n){return c="x"==(n=n.toLowerCase())?16:"b"==n?2:8,l&&l!=c?e:t}),l&&(c=l,f=f.replace(n,"$1").replace(r,"0.$1")),a!=f))return new t(f,c);$&&M(I,"not a"+(l?" base "+l:"")+" number",a),u.s=null}u.c=u.e=null,I=0}}(),R.absoluteValue=R.abs=function(){var e=new t(this);return e.s<0&&(e.s=1),e},R.ceil=function(){return C(new t(this),this.e+1,2)},R.comparedTo=R.cmp=function(e,n){return I=1,s(this,new t(e,n))},R.decimalPlaces=R.dp=function(){var e,t,n=this.c;if(!n)return null;if(e=((t=n.length-1)-u(this.e/k))*k,t=n[t])for(;t%10==0;t/=10,e--);return e<0&&(e=0),e},R.dividedBy=R.div=function(e,n){return I=3,T(this,new t(e,n),B,U)},R.dividedToIntegerBy=R.divToInt=function(e,n){return I=4,T(this,new t(e,n),0,1)},R.equals=R.eq=function(e,n){return I=5,0===s(this,new t(e,n))},R.floor=function(){return C(new t(this),this.e+1,3)},R.greaterThan=R.gt=function(e,n){return I=6,s(this,new t(e,n))>0},R.greaterThanOrEqualTo=R.gte=function(e,n){return I=7,1===(n=s(this,new t(e,n)))||0===n},R.isFinite=function(){return!!this.c},R.isInteger=R.isInt=function(){return!!this.c&&u(this.e/k)>this.c.length-2},R.isNaN=function(){return!this.s},R.isNegative=R.isNeg=function(){return this.s<0},R.isZero=function(){return!!this.c&&0==this.c[0]},R.lessThan=R.lt=function(e,n){return I=8,s(this,new t(e,n))<0},R.lessThanOrEqualTo=R.lte=function(e,n){return I=9,(n=s(this,new t(e,n)))===-1||0===n},R.minus=R.sub=function(e,n){var r,i,o,a,s=this,l=s.s;if(I=10,e=new t(e,n),n=e.s,!l||!n)return new t(NaN);if(l!=n)return e.s=-n,s.plus(e);var c=s.e/k,f=e.e/k,p=s.c,h=e.c;if(!c||!f){if(!p||!h)return p?(e.s=-n,e):new t(h?s:NaN);if(!p[0]||!h[0])return h[0]?(e.s=-n,e):new t(p[0]?s:3==U?-0:0)}if(c=u(c),f=u(f),p=p.slice(),l=c-f){for((a=l<0)?(l=-l,o=p):(f=c,o=h),o.reverse(),n=l;n--;o.push(0));o.reverse()}else for(i=(a=(l=p.length)<(n=h.length))?l:n,l=n=0;n<i;n++)if(p[n]!=h[n]){a=p[n]<h[n];break}if(a&&(o=p,p=h,h=o,e.s=-e.s),n=(i=h.length)-(r=p.length),n>0)for(;n--;p[r++]=0);for(n=P-1;i>l;){if(p[--i]<h[i]){for(r=i;r&&!p[--r];p[r]=n);--p[r],p[i]+=P}p[i]-=h[i]}for(;0==p[0];p.shift(),--f);return p[0]?L(e,p,f):(e.s=3==U?-1:1,e.c=[e.e=0],e)},R.modulo=R.mod=function(e,n){var r,i,o=this;return I=11,e=new t(e,n),!o.c||!e.s||e.c&&!e.c[0]?new t(NaN):!e.c||o.c&&!o.c[0]?new t(o):(9==K?(i=e.s,e.s=1,r=T(o,e,0,3),e.s=i,r.s*=i):r=T(o,e,0,K),o.minus(r.times(e)))},R.negated=R.neg=function(){var e=new t(this);return e.s=-e.s||null,e},R.plus=R.add=function(e,n){var r,i=this,o=i.s;if(I=12,e=new t(e,n),n=e.s,!o||!n)return new t(NaN);if(o!=n)return e.s=-n,i.minus(e);var a=i.e/k,s=e.e/k,l=i.c,c=e.c;if(!a||!s){if(!l||!c)return new t(o/0);if(!l[0]||!c[0])return c[0]?e:new t(l[0]?i:0*o)}if(a=u(a),s=u(s),l=l.slice(),o=a-s){for(o>0?(s=a,r=c):(o=-o,r=l),r.reverse();o--;r.push(0));r.reverse()}for(o=l.length,n=c.length,o-n<0&&(r=c,c=l,l=r,n=o),o=0;n;)o=(l[--n]=l[n]+c[n]+o)/P|0,l[n]%=P;return o&&(l.unshift(o),++s),L(e,l,s)},R.precision=R.sd=function(e){var t,n,r=this,i=r.c;if(null!=e&&e!==!!e&&1!==e&&0!==e&&($&&M(13,"argument"+b,e),e!=!!e&&(e=null)),!i)return null;if(n=i.length-1,t=n*k+1,n=i[n]){for(;n%10==0;n/=10,t--);for(n=i[0];n>=10;n/=10,t++);}return e&&r.e+1>t&&(t=r.e+1),t},R.round=function(e,n){var r=new t(this);return(null==e||W(e,0,A,15))&&C(r,~~e+this.e+1,null!=n&&W(n,0,8,15,x)?0|n:U),r},R.shift=function(e){var n=this;return W(e,-S,S,16,"argument")?n.times("1e"+g(e)):new t(n.c&&n.c[0]&&(e<-S||e>S)?n.s*(e<0?0:1/0):n)},R.squareRoot=R.sqrt=function(){var e,n,r,i,o,s=this,l=s.c,c=s.s,f=s.e,p=B+4,h=new t("0.5");if(1!==c||!l||!l[0])return new t(!c||c<0&&(!l||l[0])?NaN:l?s:1/0);if(c=Math.sqrt(+s),0==c||c==1/0?(n=a(l),(n.length+f)%2==0&&(n+="0"),c=Math.sqrt(n),f=u((f+1)/2)-(f<0||f%2),c==1/0?n="1e"+f:(n=c.toExponential(),n=n.slice(0,n.indexOf("e")+1)+f),r=new t(n)):r=new t(c+""),r.c[0])for(f=r.e,c=f+p,c<3&&(c=0);;)if(o=r,r=h.times(o.plus(T(s,o,p,1))),a(o.c).slice(0,c)===(n=a(r.c)).slice(0,c)){if(r.e<f&&--c,n=n.slice(c-3,c+1),"9999"!=n&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(C(r,r.e+B+2,1),e=!r.times(r).eq(s));break}if(!i&&(C(o,o.e+B+2,0),o.times(o).eq(s))){r=o;break}p+=4,c+=4,i=1}return C(r,r.e+B+1,U,e)},R.times=R.mul=function(e,n){var r,i,o,a,s,l,c,f,p,h,g,v,y,m,d,_=this,O=_.c,b=(I=17,e=new t(e,n)).c;if(!(O&&b&&O[0]&&b[0]))return!_.s||!e.s||O&&!O[0]&&!b||b&&!b[0]&&!O?e.c=e.e=e.s=null:(e.s*=_.s,O&&b?(e.c=[0],e.e=0):e.c=e.e=null),e;for(i=u(_.e/k)+u(e.e/k),e.s*=_.s,c=O.length,h=b.length,c<h&&(y=O,O=b,b=y,o=c,c=h,h=o),o=c+h,y=[];o--;y.push(0));for(m=P,d=N,o=h;--o>=0;){for(r=0,g=b[o]%d,v=b[o]/d|0,s=c,a=o+s;a>o;)f=O[--s]%d,p=O[s]/d|0,l=v*f+p*g,f=g*f+l%d*d+y[a]+r,r=(f/m|0)+(l/d|0)+v*p,y[a--]=f%m;y[a]=r}return r?++i:y.shift(),L(e,y,i)},R.toDigits=function(e,n){var r=new t(this);return e=null!=e&&W(e,1,A,18,"precision")?0|e:null,n=null!=n&&W(n,0,8,18,x)?0|n:U,e?C(r,e,n):r},R.toExponential=function(e,t){return r(this,null!=e&&W(e,0,A,19)?~~e+1:null,t,19)},R.toFixed=function(e,t){return r(this,null!=e&&W(e,0,A,20)?~~e+this.e+1:null,t,20)},R.toFormat=function(e,t){var n=r(this,null!=e&&W(e,0,A,21)?~~e+this.e+1:null,t,21);if(this.c){var i,o=n.split("."),u=+Z.groupSize,a=+Z.secondaryGroupSize,s=Z.groupSeparator,l=o[0],c=o[1],f=this.s<0,p=f?l.slice(1):l,h=p.length;if(a&&(i=u,u=a,a=i,h-=i),u>0&&h>0){for(i=h%u||u,l=p.substr(0,i);i<h;i+=u)l+=s+p.substr(i,u);a>0&&(l+=s+p.slice(i)),f&&(l="-"+l)}n=c?l+Z.decimalSeparator+((a=+Z.fractionGroupSize)?c.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+Z.fractionGroupSeparator):c):l}return n},R.toFraction=function(e){var n,r,i,o,u,s,l,c,f,p=$,h=this,g=h.c,v=new t(F),y=r=new t(F),m=l=new t(F);if(null!=e&&($=!1,s=new t(e),$=p,(p=s.isInt())&&!s.lt(F)||($&&M(22,"max denominator "+(p?"out of range":"not an integer"),e),e=!p&&s.c&&C(s,s.e+1,1).gte(F)?s:null)),!g)return h.toString();for(f=a(g),o=v.e=f.length-h.e-1,v.c[0]=j[(u=o%k)<0?k+u:u],e=!e||s.cmp(v)>0?o>0?v:y:s,u=H,H=1/0,s=new t(f),l.c[0]=0;c=T(s,v,0,1),i=r.plus(c.times(m)),1!=i.cmp(e);)r=m,m=i,y=l.plus(c.times(i=y)),l=i,v=s.minus(c.times(i=v)),s=i;return i=T(e.minus(r),m,0,1),l=l.plus(i.times(y)),r=r.plus(i.times(m)),l.s=y.s=h.s,o*=2,n=T(y,m,o,U).minus(h).abs().cmp(T(l,r,o,U).minus(h).abs())<1?[y.toString(),m.toString()]:[l.toString(),r.toString()],H=u,n},R.toNumber=function(){var e=this;return+e||(e.s?0*e.s:NaN)},R.toPower=R.pow=function(e){var n,r,i=O(e<0?-e:+e),o=this;if(!W(e,-S,S,23,"exponent")&&(!isFinite(e)||i>S&&(e/=0)||parseFloat(e)!=e&&!(e=NaN)))return new t(Math.pow(+o,e));for(n=V?_(V/k+2):0,r=new t(F);;){if(i%2){if(r=r.times(o),!r.c)break;n&&r.c.length>n&&(r.c.length=n)}if(i=O(i/2),!i)break;o=o.times(o),n&&o.c&&o.c.length>n&&(o.c.length=n)}return e<0&&(r=F.div(r)),n?C(r,V,U):r},R.toPrecision=function(e,t){return r(this,null!=e&&W(e,1,A,24,"precision")?0|e:null,t,24)},R.toString=function(e){var t,r=this,i=r.s,o=r.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(t=a(r.c),t=null!=e&&W(e,2,64,25,"base")?n(h(t,o),0|e,10,i):o<=q||o>=D?p(t,o):h(t,o),i<0&&r.c[0]&&(t="-"+t)),t},R.truncated=R.trunc=function(){return C(new t(this),this.e+1,1)},R.valueOf=R.toJSON=function(){return this.toString()},null!=e&&t.config(e),t}function u(e){var t=0|e;return e>0||e===t?t:t-1}function a(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(t=e[r++]+"",n=k-t.length;n--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function s(e,t){var n,r,i=e.c,o=t.c,u=e.s,a=t.s,s=e.e,l=t.e;if(!u||!a)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-a:u;if(u!=a)return u;if(n=u<0,r=s==l,!i||!o)return r?0:!i^n?1:-1;if(!r)return s>l^n?1:-1;for(a=(s=i.length)<(l=o.length)?s:l,u=0;u<a;u++)if(i[u]!=o[u])return i[u]>o[u]^n?1:-1;return s==l?0:s>l^n?1:-1}function l(e,t,n){return(e=g(e))>=t&&e<=n}function c(e){return"[object Array]"==Object.prototype.toString.call(e)}function f(e,t,n){for(var r,i,o=[0],u=0,a=e.length;u<a;){for(i=o.length;i--;o[i]*=t);for(o[r=0]+=w.indexOf(e.charAt(u++));r<o.length;r++)o[r]>n-1&&(null==o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}function p(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function h(e,t){var n,r;if(t<0){for(r="0.";++t;r+="0");e=r+e}else if(n=e.length,++t>n){for(r="0",t-=n;--t;r+="0");e+=r}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}function g(e){return e=parseFloat(e),e<0?_(e):O(e)}var v,y,m,d=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_=Math.ceil,O=Math.floor,b=" not a boolean or binary digit",x="rounding mode",E="number type has more than 15 significant digits",w="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",P=1e14,k=14,S=9007199254740991,j=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],N=1e7,A=1e9;v=o(),r=function(){return v}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}])});